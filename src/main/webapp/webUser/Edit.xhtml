<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">  

    <ui:composition>

        <p:dialog id="WebUserEditDlg" widgetVar="WebUserEditDialog" modal="true" resizable="false" appendTo="@(body)" header="Edit User">

            <h:form id="WebUserEditForm">
                <p:panelGrid id="display" columns="2" rendered="#{webUserController.selected != null}">
                    <f:facet name="header" >
                        <p:commandButton ajax="false" actionListener="#{webUserController.update}" value="#{bundleClinical.Save}" update="display,:userListForm:userListTab" oncomplete="handleSubmit(args, 'WebUserEditDialog');" />
                        <p:commandButton ajax="false" value="Back" action="WebUserEditDialog.hide()"/>
                    </f:facet>

                    <p:outputLabel value="Username" for="username" />
                    <p:inputText  id="username" value="#{webUserController.selected.name}" title="#{bundleClinical.EditWebUserTitle_name}"
                                  readonly="true" required="true" requiredMessage="#{bundleClinical.EditWebUserRequiredMessage_name}"/>


                    <p:outputLabel value="Title" for="title" />
                    <p:selectOneMenu id="title"  value="#{webUserController.selected.person.title}"  >
                        <f:selectItems value="#{itemController.titles}" var="t" itemLabel="#{t.name}"
                                       itemValue="#{t}" ></f:selectItems>
                    </p:selectOneMenu>

                    <p:outputLabel value="Name" for="name" />
                    <p:inputText 
                        autocomplete="off" 
                        id="name" 
                        value="#{webUserController.selected.person.name}"
                        title="Name" />


                    <p:outputLabel value="Institution" for="institution" />
                    <p:autoComplete  id="institution" value="#{webUserController.selected.institution}" 
                                     completeMethod="#{institutionController.completeInstitutions}"
                                     var="i" itemLabel="#{i.name}" itemValue="#{i}"
                                     forceSelection="true" maxResults="15" minQueryLength="3">
                    </p:autoComplete >

                    <p:outputLabel value="Email" for="email" />
                    <p:inputText id="email" value="#{webUserController.selected.email}" title="#{bundleClinical.EditWebUserTitle_email}" />

                    <p:outputLabel value="Telephone No." for="telNo" />
                    <p:inputText id="telNo" value="#{webUserController.selected.telNo}" title="#{bundleClinical.EditWebUserTitle_telNo}" />


                    <p:outputLabel value="Role" for="webUserRole" />
                    <p:selectOneMenu  id="webUserRole" value="#{webUserController.selected.webUserRole}"  >
                        <f:selectItems value="#{applicationController.webUserRoles}" 
                                       var="webUserRoles" 
                                       itemLabel="#{webUserRoles.label}" 
                                       itemValue="#{webUserRoles}">
                        </f:selectItems>
                    </p:selectOneMenu>
                </p:panelGrid>
            </h:form>
        </p:dialog>
    </ui:composition>
</html>

